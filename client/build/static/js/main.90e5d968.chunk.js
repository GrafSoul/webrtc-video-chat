(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,n,t){e.exports=t(88)},49:function(e,n,t){},80:function(e,n){},83:function(e,n,t){},88:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),o=t(40),a=t.n(o),i=(t(49),t(43)),u=t(1),l=t(90),s=function(e){return c.a.createElement("button",{onClick:function(){return function(){var n=Object(l.a)();e.history.push("/room/".concat(n))}()}},"Create Room")},d=t(10),f=t(41),m=t.n(f),h=function(e){var n=Object(r.useState)(!0),t=Object(d.a)(n,2),o=t[0],a=t[1],i=Object(r.useState)(!0),u=Object(d.a)(i,2),l=u[0],s=u[1],f=Object(r.useState)(!1),h=Object(d.a)(f,2),p=h[0],v=h[1],b=Object(r.useRef)(),g=Object(r.useRef)(),E=Object(r.useRef)(),w=Object(r.useRef)(),k=Object(r.useRef)(),j=Object(r.useRef)(),C=Object(r.useRef)([]);function O(e){var n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return n.onicecandidate=D,n.ontrack=S,n.onnegotiationneeded=function(){return function(e){E.current.createOffer().then((function(e){return E.current.setLocalDescription(e)})).then((function(){var n={target:e,caller:w.current.id,sdp:E.current.localDescription};w.current.emit("offer",n)})).catch((function(e){return console.log(e)}))}(e)},n}function R(e){E.current=O();var n=new RTCSessionDescription(e.sdp);E.current.setRemoteDescription(n).then((function(){j.current.getTracks().forEach((function(e){return E.current.addTrack(e,j.current)}))})).then((function(){return E.current.createAnswer()})).then((function(e){return E.current.setLocalDescription(e)})).then((function(){var n={target:e.caller,caller:w.current.id,sdp:E.current.localDescription};w.current.emit("answer",n)}))}function T(e){var n=new RTCSessionDescription(e.sdp);E.current.setRemoteDescription(n).catch((function(e){return console.log(e)}))}function D(e){if(e.candidate){var n={target:k.current,candidate:e.candidate};w.current.emit("ice-candidate",n)}}function y(e){var n=new RTCIceCandidate(e);E.current.addIceCandidate(n).catch((function(e){return console.log(e)}))}function S(e){g.current.srcObject=e.streams[0]}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:o,video:l}).then((function(n){b.current.srcObject=n,j.current=n,w.current=m.a.connect("/"),w.current.emit("join room",e.match.params.roomID),w.current.on("other user",(function(e){!function(e){E.current=O(e),j.current.getTracks().forEach((function(e){return C.current.push(E.current.addTrack(e,j.current))}))}(e),k.current=e})),w.current.on("user joined",(function(e){k.current=e})),w.current.on("offer",R),w.current.on("answer",T),w.current.on("ice-candidate",y)}))}),[o,l]),c.a.createElement("div",null,c.a.createElement("div",{style:{display:"flex",width:"1050px",margin:"auto"}},c.a.createElement("div",null,c.a.createElement("h3",null,"User (I'm)"),c.a.createElement("video",{controls:!0,autoPlay:!0,ref:b,style:{border:"4px solid red",height:500,width:500}})),c.a.createElement("div",null,c.a.createElement("h3",null,"Partner"),c.a.createElement("video",{controls:!0,autoPlay:!0,ref:g,style:{border:"4px solid blue",height:500,width:500}}))),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){a(!o)}},"Microphone"),c.a.createElement("button",{onClick:function(){s(!l)}},"Camera"),c.a.createElement("button",{onClick:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var n=e.getTracks()[0];C.current.find((function(e){return"video"===e.track.kind})).replaceTrack(n),n.onended=function(){C.current.find((function(e){return"video"===e.track.kind})).replaceTrack(j.current.getTracks()[1])}}))}},"Share screen")),c.a.createElement("div",null,"URL for Contact: ",window.location.href,c.a.createElement("button",{onClick:function(){return e=window.location.href,void navigator.clipboard.writeText(e).then((function(){console.log("Copied!"),v(!0),setTimeout((function(){return v(!1)}),1e3)})).catch((function(e){console.log("Something went wrong",e)}));var e}},"Copy")," ",p&&c.a.createElement("span",null,"Copied!")))};t(83);var p=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",exact:!0,component:s}),c.a.createElement(u.a,{path:"/room/:roomID",component:h}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.90e5d968.chunk.js.map