{"version":3,"sources":["components/Header.js","components/Footer.js","components/QRCodeImage.js","components/Loader.js","p2p_videochat/CreateRoom.js","components/LinkRoom.js","components/StreamControl.js","components/ExitButton.js","p2p_videochat/Room.js","App.js","serviceWorker.js","index.js"],"names":["Header","className","src","alt","Footer","QRCodeImage","url","value","bgColor","fgColor","size","Loader","CreateRoom","history","useState","spinner","setSpinner","browser","navigator","userAgent","toLowerCase","is_IE","test","useEffect","setTimeout","id","uuid","window","location","href","onClick","push","LinkRoom","shareLink","handleShareLink","handleCopyLink","copied","join","title","type","onChange","document","fullscreenElement","Object","defineProperty","get","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","mozFullScreenEnabled","msFullscreenEnabled","webkitFullscreenEnabled","StreamControl","handleToggleMic","audio","handleToggleCamera","video","handleToggleSound","sound","handleToggleFullScreen","handleShareMonitor","handleToggleMirror","mirror","update","fullScreen","fullMonitor","setFullMonitor","exitFullscreen","documentElement","requestFullscreen","ExitButton","exitRoom","Room","match","setAudio","setVideo","setSound","isCopied","setIsCopied","setFullScreen","setMirror","settings","setSettings","setShareLink","setUpdate","userVideo","useRef","partnerVideo","peerRef","socketRef","otherUser","userStream","senders","handleAnswer","message","desc","RTCSessionDescription","sdp","current","setRemoteDescription","catch","e","console","log","handleICECandidateEvent","candidate","payload","target","emit","handleNewICECandidateMsg","incoming","RTCIceCandidate","addIceCandidate","handleTrackEvent","srcObject","streams","createPeer","userID","peer","RTCPeerConnection","iceServers","urls","credential","username","onicecandidate","ontrack","onnegotiationneeded","createOffer","then","offer","setLocalDescription","caller","localDescription","handleNegotiationNeededEvent","handleRecieveCall","getTracks","forEach","track","addTrack","createAnswer","answer","mediaDevices","getUserMedia","stream","io","connect","params","roomID","on","callUser","poster","autoPlay","muted","ref","getAudioTracks","length","enabled","getVideoTracks","getDisplayMedia","cursor","screenTrack","find","sender","kind","replaceTrack","onended","handleToggleSettings","clipboard","writeText","err","App","path","exact","component","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","error"],"mappings":"qLAiBeA,EAfA,WACX,OACI,4BAAQC,UAAU,UACd,yBAAKA,UAAU,eACX,4BACI,0BAAMA,UAAU,QACZ,yBAAKC,IAAI,kBAAkBC,IAAI,UAFvC,aCIDC,EARA,WACX,OACI,4BAAQH,UAAU,UACd,oF,iBCSGI,EAXK,SAAC,GAAa,IAAXC,EAAU,EAAVA,IACnB,OACI,kBAAC,IAAD,CACIC,MAAOD,EACPE,QAAS,UACTC,QAAS,UACTC,KAAM,OC2LHC,EAlMA,WACX,OACI,yBAAKV,UAAU,UACX,yBAAKA,UAAU,kBACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAGnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAGnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,aACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,cACX,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,iBACf,yBAAKA,UAAU,kBAEnB,yBAAKA,UAAU,c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","file":"static/js/main.fa610c97.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Header = () => {\r\n    return (\r\n        <header className=\"header\">\r\n            <div className=\"header-wrap\">\r\n                <h1>\r\n                    <span className=\"logo\">\r\n                        <img src=\"images/logo.svg\" alt=\"Logo\" />\r\n                    </span>\r\n                    VID.OK\r\n                </h1>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p>Â© 2020 | VID.OK | Created by Dmitriy Zatulovskiy</p>\r\n        </footer>\r\n    );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport QRCode from 'qrcode.react';\r\n\r\nconst QRCodeImage = ({ url }) => {\r\n    return (\r\n        <QRCode\r\n            value={url}\r\n            bgColor={'#1d3850'}\r\n            fgColor={'#bebebe'}\r\n            size={200}\r\n        />\r\n    );\r\n};\r\n\r\nexport default QRCodeImage;\r\n","import React from 'react';\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <div className=\"socket\">\r\n            <div className=\"gel center-gel\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c1 r1\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c2 r1\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c3 r1\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c4 r1\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c5 r1\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c6 r1\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n\r\n            <div className=\"gel c7 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n\r\n            <div className=\"gel c8 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c9 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c10 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c11 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c12 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c13 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c14 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c15 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c16 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c17 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c18 r2\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c19 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c20 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c21 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c22 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c23 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c24 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c25 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c26 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c28 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c29 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c30 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c31 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c32 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c33 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c34 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c35 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c36 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n            <div className=\"gel c37 r3\">\r\n                <div className=\"hex-brick h1\"></div>\r\n                <div className=\"hex-brick h2\"></div>\r\n                <div className=\"hex-brick h3\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Loader;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { v1 as uuid } from 'uuid';\r\n\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport QRCodeImage from '../components/QRCodeImage';\r\nimport Loader from '../components/Loader';\r\n\r\nconst CreateRoom = ({ history }) => {\r\n    const [spinner, setSpinner] = useState(false);\r\n\r\n    const browser = navigator.userAgent.toLowerCase();\r\n    const is_IE =\r\n        /trident/gi.test(browser) ||\r\n        /msie/gi.test(browser) ||\r\n        /edge/gi.test(browser);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => setSpinner(true), 1000);\r\n    }, []);\r\n\r\n    const id = uuid();\r\n    const url = window.location.href + `room/${id}`;\r\n\r\n    const createRoom = () => {\r\n        history.push(`/room/${id}`);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <div className=\"container\">\r\n                <main>\r\n                    {is_IE ? (\r\n                        <section className=\"create-room\">\r\n                            <div className=\"crete-info\">\r\n                                <h2>\r\n                                    You are using a browser that does not\r\n                                    support the technologies used in this\r\n                                    service\r\n                                </h2>\r\n\r\n                                <p>\r\n                                    <strong>VID.OK</strong> - Secure Video Chat.\r\n                                    Video transfer and audio stream between\r\n                                    browsers interlocutors not giving access to\r\n                                    third parties.\r\n                                </p>\r\n                            </div>\r\n                        </section>\r\n                    ) : (\r\n                        <section className=\"create-room\">\r\n                            <div className=\"crete-info\">\r\n                                <p>\r\n                                    <strong>VID.OK</strong> - Secure Video Chat.\r\n                                    Video transfer and audio stream between\r\n                                    browsers interlocutors not giving access to\r\n                                    third parties.\r\n                                </p>\r\n                                <p>\r\n                                    To create a connection, click on the button\r\n                                    - <strong>\"Create Room\"</strong> and send\r\n                                    the link to the person with whom you want to\r\n                                    communicate.\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"link-url\">\r\n                                <p>{url}</p>\r\n                            </div>\r\n\r\n                            <div className=\"qrcode\">\r\n                                <QRCodeImage url={url} />\r\n                            </div>\r\n\r\n                            <div className=\"btn-go\">\r\n                                <button onClick={() => createRoom()}>\r\n                                    Create Room\r\n                                </button>\r\n                            </div>\r\n                        </section>\r\n                    )}\r\n                </main>\r\n            </div>\r\n\r\n            <Footer />\r\n\r\n            {!spinner && (\r\n                <div className=\"loader\">\r\n                    <Loader />\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default CreateRoom;\r\n","import React from 'react';\r\n\r\nimport QRCodeImage from './QRCodeImage';\r\n\r\nconst LinkRoom = ({\r\n    shareLink,\r\n    handleShareLink,\r\n    handleCopyLink,\r\n    copied,\r\n    url,\r\n}) => {\r\n    return (\r\n        <div className={['link', shareLink ? 'active' : null].join(' ')}>\r\n            <button\r\n                className=\"btn-close\"\r\n                onClick={handleShareLink}\r\n                title=\"Close\"\r\n            >\r\n                <span className=\"icon icon-close\"></span>\r\n            </button>\r\n\r\n            <h2>Contact link</h2>\r\n            <p className=\"link-info\">\r\n                Copy the link and send it to the person you want to meet in a\r\n                video chat\r\n            </p>\r\n            <p className=\"link-url\">\r\n                <input type=\"text\" value={url} onChange={() => {}} />\r\n            </p>\r\n\r\n            <div className=\"link-copy\">\r\n                <button onClick={() => handleCopyLink(url)}>Copy link</button>{' '}\r\n                {copied && <span className=\"copyed\">Copied!</span>}\r\n            </div>\r\n\r\n            <p className=\"link-info\">\r\n                Use as an option. Scan QRCode and send the resulting link to the\r\n                person with who want to start communicating in video chat\r\n            </p>\r\n            <div className=\"link-qrcode\">\r\n                <QRCodeImage url={url} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LinkRoom;\r\n","import React, { useState } from 'react';\r\n\r\nif (!document.fullscreenElement) {\r\n    Object.defineProperty(document, 'fullscreenElement', {\r\n        get: function () {\r\n            return (\r\n                document.mozFullScreenElement ||\r\n                document.msFullscreenElement ||\r\n                document.webkitFullscreenElement\r\n            );\r\n        },\r\n    });\r\n\r\n    Object.defineProperty(document, 'fullscreenEnabled', {\r\n        get: function () {\r\n            return (\r\n                document.mozFullScreenEnabled ||\r\n                document.msFullscreenEnabled ||\r\n                document.webkitFullscreenEnabled\r\n            );\r\n        },\r\n    });\r\n}\r\n\r\nconst StreamControl = ({\r\n    handleShareLink,\r\n    handleToggleMic,\r\n    audio,\r\n    handleToggleCamera,\r\n    video,\r\n    handleToggleSound,\r\n    sound,\r\n    handleToggleFullScreen,\r\n    handleShareMonitor,\r\n    handleToggleMirror,\r\n    mirror,\r\n    update,\r\n    fullScreen,\r\n}) => {\r\n    const [fullMonitor, setFullMonitor] = useState(false);\r\n\r\n    const handleFullscreen = () => {\r\n        if (document.fullscreenElement) {\r\n            document.exitFullscreen();\r\n        } else {\r\n            document.documentElement.requestFullscreen();\r\n        }\r\n        setFullMonitor(!fullMonitor);\r\n        return false;\r\n    };\r\n\r\n    return (\r\n        <div className=\"stream-control\">\r\n            <div className=\"btn-link\">\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={handleShareLink}\r\n                    title=\"Open Link\"\r\n                >\r\n                    <span className=\"icon icon-link\"></span>\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"btn-group\">\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={handleToggleMic}\r\n                    title=\"Microphone ON/OFF\"\r\n                >\r\n                    <span\r\n                        className={[\r\n                            'icon',\r\n                            'icon-mic',\r\n                            audio ? null : 'off',\r\n                        ].join(' ')}\r\n                    ></span>\r\n                </button>\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={handleToggleCamera}\r\n                    title=\"Camera ON/OFF\"\r\n                >\r\n                    <span\r\n                        className={[\r\n                            'icon',\r\n                            'icon-camera',\r\n                            video ? null : 'off',\r\n                        ].join(' ')}\r\n                    ></span>\r\n                </button>\r\n\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={handleToggleSound}\r\n                    title=\"Sound ON/OFF\"\r\n                >\r\n                    <span\r\n                        className={[\r\n                            'icon',\r\n                            'icon-sound',\r\n                            sound ? 'off' : null,\r\n                        ].join(' ')}\r\n                    ></span>\r\n                </button>\r\n\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={handleToggleMirror}\r\n                    title=\"Mirror\"\r\n                >\r\n                    <span\r\n                        className={[\r\n                            'icon',\r\n                            'icon-mirror',\r\n                            mirror ? null : 'off',\r\n                        ].join(' ')}\r\n                    ></span>\r\n                </button>\r\n\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={handleToggleFullScreen}\r\n                    title=\"Fullscreen ON/OFF\"\r\n                >\r\n                    <span\r\n                        className={[\r\n                            'icon',\r\n                            'icon-fullscreen',\r\n                            fullScreen ? null : 'off',\r\n                        ].join(' ')}\r\n                    ></span>\r\n                </button>\r\n\r\n                <button\r\n                    className=\"btn\"\r\n                    onClick={() => handleFullscreen()}\r\n                    title=\"Monitor\"\r\n                >\r\n                    <span\r\n                        className={[\r\n                            'icon',\r\n                            'icon-monitor',\r\n                            fullMonitor ? null : 'off',\r\n                        ].join(' ')}\r\n                    ></span>\r\n                </button>\r\n\r\n                {update && (\r\n                    <button\r\n                        className=\"btn\"\r\n                        onClick={handleShareMonitor}\r\n                        title=\"Share Content\"\r\n                    >\r\n                        <span className=\"icon icon-share\"></span>\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StreamControl;\r\n","import React from 'react';\r\n\r\nconst ExitButton = ({ exitRoom }) => {\r\n    return (\r\n        <div className=\"btn-exit-wrap\">\r\n            <button className=\"btn-exit\" onClick={exitRoom} title=\"Exit\">\r\n                <span className=\"icon icon-exit\"></span>\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ExitButton;\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\n// eslint-disable-next-line\r\nimport adapter from 'webrtc-adapter';\r\n\r\nimport Header from '../components/Header';\r\nimport Footer from '../components/Footer';\r\nimport LinkRoom from '../components/LinkRoom';\r\nimport StreamControl from '../components/StreamControl';\r\nimport ExitButton from '../components/ExitButton';\r\nimport Loader from '../components/Loader';\r\n\r\nconst Room = ({ match, history }) => {\r\n    const [audio, setAudio] = useState(true);\r\n    const [video, setVideo] = useState(true);\r\n    const [sound, setSound] = useState(false);\r\n    const [isCopied, setIsCopied] = useState(false);\r\n    const [fullScreen, setFullScreen] = useState(false);\r\n    const [mirror, setMirror] = useState(false);\r\n    const [settings, setSettings] = useState(false);\r\n    const [shareLink, setShareLink] = useState(false);\r\n    const [spinner, setSpinner] = useState(false);\r\n    const [update, setUpdate] = useState(false);\r\n\r\n    const userVideo = useRef();\r\n    const partnerVideo = useRef();\r\n    const peerRef = useRef();\r\n    const socketRef = useRef();\r\n    const otherUser = useRef();\r\n    const userStream = useRef();\r\n    const senders = useRef([]);\r\n\r\n    useEffect(() => {\r\n        function callUser(userID) {\r\n            peerRef.current = createPeer(userID);\r\n            userStream.current\r\n                .getTracks()\r\n                .forEach((track) =>\r\n                    senders.current.push(\r\n                        peerRef.current.addTrack(track, userStream.current),\r\n                    ),\r\n                );\r\n        }\r\n\r\n        function createPeer(userID) {\r\n            const peer = new RTCPeerConnection({\r\n                iceServers: [\r\n                    {\r\n                        urls: 'stun:stun.stunprotocol.org',\r\n                    },\r\n                    {\r\n                        urls: 'turn:numb.viagenie.ca',\r\n                        credential: 'muazkh',\r\n                        username: 'webrtc@live.com',\r\n                    },\r\n                ],\r\n            });\r\n\r\n            peer.onicecandidate = handleICECandidateEvent;\r\n            peer.ontrack = handleTrackEvent;\r\n            peer.onnegotiationneeded = () =>\r\n                handleNegotiationNeededEvent(userID);\r\n\r\n            return peer;\r\n        }\r\n\r\n        function handleRecieveCall(incoming) {\r\n            peerRef.current = createPeer();\r\n            const desc = new RTCSessionDescription(incoming.sdp);\r\n            peerRef.current\r\n                .setRemoteDescription(desc)\r\n                .then(() => {\r\n                    userStream.current\r\n                        .getTracks()\r\n                        .forEach((track) =>\r\n                            peerRef.current.addTrack(track, userStream.current),\r\n                        );\r\n                })\r\n                .then(() => {\r\n                    return peerRef.current.createAnswer();\r\n                })\r\n                .then((answer) => {\r\n                    return peerRef.current.setLocalDescription(answer);\r\n                })\r\n                .then(() => {\r\n                    const payload = {\r\n                        target: incoming.caller,\r\n                        caller: socketRef.current.id,\r\n                        sdp: peerRef.current.localDescription,\r\n                    };\r\n                    socketRef.current.emit('answer', payload);\r\n                });\r\n        }\r\n\r\n        navigator.mediaDevices\r\n            .getUserMedia({ audio: true, video: true })\r\n            .then((stream) => {\r\n                userVideo.current.srcObject = stream;\r\n                userStream.current = stream;\r\n\r\n                socketRef.current = io.connect('/');\r\n                socketRef.current.emit('join room', match.params.roomID);\r\n                socketRef.current.on('other user', (userID) => {\r\n                    setUpdate(true);\r\n                    callUser(userID);\r\n                    otherUser.current = userID;\r\n                });\r\n\r\n                socketRef.current.on('user joined', (userID) => {\r\n                    otherUser.current = userID;\r\n                });\r\n\r\n                socketRef.current.on('offer', handleRecieveCall);\r\n\r\n                socketRef.current.on('answer', handleAnswer);\r\n\r\n                socketRef.current.on('ice-candidate', handleNewICECandidateMsg);\r\n            });\r\n\r\n        setTimeout(() => setSpinner(true), 1000);\r\n    }, [match]);\r\n\r\n    function handleNegotiationNeededEvent(userID) {\r\n        peerRef.current\r\n            .createOffer()\r\n            .then((offer) => {\r\n                return peerRef.current.setLocalDescription(offer);\r\n            })\r\n            .then(() => {\r\n                const payload = {\r\n                    target: userID,\r\n                    caller: socketRef.current.id,\r\n                    sdp: peerRef.current.localDescription,\r\n                };\r\n                socketRef.current.emit('offer', payload);\r\n            })\r\n            .catch((e) => console.log(e));\r\n    }\r\n\r\n    function handleAnswer(message) {\r\n        const desc = new RTCSessionDescription(message.sdp);\r\n        peerRef.current.setRemoteDescription(desc).catch((e) => console.log(e));\r\n    }\r\n\r\n    function handleICECandidateEvent(e) {\r\n        if (e.candidate) {\r\n            const payload = {\r\n                target: otherUser.current,\r\n                candidate: e.candidate,\r\n            };\r\n            socketRef.current.emit('ice-candidate', payload);\r\n        }\r\n    }\r\n\r\n    function handleNewICECandidateMsg(incoming) {\r\n        const candidate = new RTCIceCandidate(incoming);\r\n\r\n        peerRef.current.addIceCandidate(candidate).catch((e) => console.log(e));\r\n    }\r\n\r\n    function handleTrackEvent(e) {\r\n        partnerVideo.current.srcObject = e.streams[0];\r\n    }\r\n\r\n    function handleShareMonitor() {\r\n        if (senders.current.length === 0) {\r\n            return false;\r\n        } else {\r\n            navigator.mediaDevices\r\n                .getDisplayMedia({ cursor: true })\r\n                .then((stream) => {\r\n                    const screenTrack = stream.getTracks()[0];\r\n                    senders.current\r\n                        .find((sender) => sender.track.kind === 'video')\r\n                        .replaceTrack(screenTrack);\r\n                    screenTrack.onended = function () {\r\n                        senders.current\r\n                            .find((sender) => sender.track.kind === 'video')\r\n                            .replaceTrack(userStream.current.getTracks()[1]);\r\n                    };\r\n                });\r\n        }\r\n    }\r\n\r\n    function handleToggleSettings() {\r\n        setSettings(!settings);\r\n    }\r\n\r\n    function handleToggleSound() {\r\n        setSound(!sound);\r\n    }\r\n\r\n    function handleToggleMic() {\r\n        if (\r\n            userStream.current != null &&\r\n            userStream.current.getAudioTracks().length > 0\r\n        ) {\r\n            userStream.current.getAudioTracks()[0].enabled = !audio;\r\n            setAudio(!audio);\r\n        }\r\n    }\r\n\r\n    function handleToggleCamera() {\r\n        if (\r\n            userStream.current != null &&\r\n            userStream.current.getVideoTracks().length > 0\r\n        ) {\r\n            userStream.current.getVideoTracks()[0].enabled = !video;\r\n            setVideo(!video);\r\n        }\r\n    }\r\n\r\n    function handleToggleFullScreen() {\r\n        setFullScreen(!fullScreen);\r\n    }\r\n\r\n    function handleToggleMirror() {\r\n        setMirror(!mirror);\r\n    }\r\n\r\n    function handleCopyLink(url) {\r\n        navigator.clipboard\r\n            .writeText(url)\r\n            .then(() => {\r\n                setIsCopied(true);\r\n                setTimeout(() => setIsCopied(false), 1000);\r\n            })\r\n            .catch((err) => {\r\n                console.log('Something went wrong', err);\r\n            });\r\n\r\n        setTimeout(() => {\r\n            handleShareLink();\r\n        }, 1800);\r\n    }\r\n\r\n    function handleShareLink() {\r\n        setShareLink(!shareLink);\r\n    }\r\n\r\n    const exitRoom = () => {\r\n        history.push('/');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n\r\n            <ExitButton exitRoom={exitRoom} />\r\n\r\n            <div className=\"video\">\r\n                <video\r\n                    id=\"partner\"\r\n                    poster=\"images/poster.jpg\"\r\n                    autoPlay\r\n                    muted={sound}\r\n                    ref={partnerVideo}\r\n                    className={[\r\n                        mirror ? 'mirror' : null,\r\n                        fullScreen ? 'active' : null,\r\n                    ].join(' ')}\r\n                ></video>\r\n                <div className=\"user-video\">\r\n                    <video\r\n                        autoPlay\r\n                        muted\r\n                        ref={userVideo}\r\n                        poster=\"images/poster.jpg\"\r\n                    ></video>\r\n                </div>\r\n            </div>\r\n\r\n            <StreamControl\r\n                handleShareLink={handleShareLink}\r\n                handleToggleMic={handleToggleMic}\r\n                audio={audio}\r\n                handleToggleCamera={handleToggleCamera}\r\n                video={video}\r\n                handleToggleSound={handleToggleSound}\r\n                sound={sound}\r\n                handleToggleFullScreen={handleToggleFullScreen}\r\n                handleShareMonitor={handleShareMonitor}\r\n                handleToggleSettings={handleToggleSettings}\r\n                handleToggleMirror={handleToggleMirror}\r\n                otherUser={otherUser.current}\r\n                update={update}\r\n                mirror={mirror}\r\n                fullScreen={fullScreen}\r\n            />\r\n\r\n            <Footer />\r\n\r\n            <LinkRoom\r\n                shareLink={shareLink}\r\n                handleShareLink={handleShareLink}\r\n                handleCopyLink={handleCopyLink}\r\n                copied={isCopied}\r\n                url={window.location.href}\r\n            />\r\n            {!spinner && (\r\n                <div className=\"loader\">\r\n                    <Loader />\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Room;\r\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nimport CreateRoom from './p2p_videochat/CreateRoom';\nimport Room from './p2p_videochat/Room';\n\nfunction App() {\n    return (\n        <>\n            <BrowserRouter>\n                <Switch>\n                    <Route path=\"/\" exact component={CreateRoom} />\n                    <Route path=\"/room/:roomID\" component={Room} />\n                </Switch>\n            </BrowserRouter>\n        </>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/main.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}