(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var c=t(0),n=t.n(c),r=t(45),l=t.n(r),i=(t(56),t(50)),s=t(1),m=t(2),o=t(102),d=function(){return n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"header-wrap"},n.a.createElement("h1",null,n.a.createElement("span",{className:"logo"},n.a.createElement("img",{src:"images/logo.svg",alt:"Logo"})),"VID.OK")))},h=function(){return n.a.createElement("footer",{className:"footer"},n.a.createElement("p",null,"\xa9 2020 | VID.OK | Created by Dmitriy Zatulovskiy"))},u=t(46),E=t.n(u),v=function(e){var a=e.url;return n.a.createElement(E.a,{value:a,bgColor:"#1d3850",fgColor:"#bebebe",size:200})},N=function(){return n.a.createElement("div",{className:"socket"},n.a.createElement("div",{className:"gel center-gel"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c1 r1"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c2 r1"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c3 r1"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c4 r1"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c5 r1"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c6 r1"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c7 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c8 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c9 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c10 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c11 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c12 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c13 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c14 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c15 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c16 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c17 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c18 r2"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c19 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c20 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c21 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c22 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c23 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c24 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c25 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c26 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c28 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c29 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c30 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c31 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c32 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c33 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c34 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c35 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c36 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})),n.a.createElement("div",{className:"gel c37 r3"},n.a.createElement("div",{className:"hex-brick h1"}),n.a.createElement("div",{className:"hex-brick h2"}),n.a.createElement("div",{className:"hex-brick h3"})))},b=function(e){var a=e.history,t=Object(c.useState)(!1),r=Object(m.a)(t,2),l=r[0],i=r[1],s=navigator.userAgent.toLowerCase(),u=/trident/gi.test(s)||/msie/gi.test(s)||/edge/gi.test(s);Object(c.useEffect)((function(){setTimeout((function(){return i(!0)}),1e3)}),[]);var E=Object(o.a)(),b=window.location.href+"room/".concat(E);return n.a.createElement(n.a.Fragment,null,n.a.createElement(d,null),n.a.createElement("div",{className:"container"},n.a.createElement("main",null,u?n.a.createElement("section",{className:"create-room"},n.a.createElement("div",{className:"crete-info"},n.a.createElement("h2",null,"You are using a browser that does not support the technologies used in this service"),n.a.createElement("p",null,n.a.createElement("strong",null,"VID.OK")," - Secure Video Chat. Video transfer and audio stream between browsers interlocutors not giving access to third parties."))):n.a.createElement("section",{className:"create-room"},n.a.createElement("div",{className:"crete-info"},n.a.createElement("p",null,n.a.createElement("strong",null,"VID.OK")," - Secure Video Chat. Video transfer and audio stream between browsers interlocutors not giving access to third parties."),n.a.createElement("p",null,"To create a connection, click on the button - ",n.a.createElement("strong",null,'"Create Room"')," and send the link to the person with whom you want to communicate.")),n.a.createElement("div",{className:"link-url"},n.a.createElement("p",null,b)),n.a.createElement("div",{className:"qrcode"},n.a.createElement(v,{url:b})),n.a.createElement("div",{className:"btn-go"},n.a.createElement("button",{onClick:function(){a.push("/room/".concat(E))}},"Create Room"))))),n.a.createElement(h,null),!l&&n.a.createElement("div",{className:"loader"},n.a.createElement(N,null)))},k=t(47),g=t.n(k),f=(t(99),function(e){var a=e.shareLink,t=e.handleShareLink,c=e.handleCopyLink,r=e.copied,l=e.url;return n.a.createElement("div",{className:["link",a?"active":null].join(" ")},n.a.createElement("button",{className:"btn-close",onClick:t,title:"Close"},n.a.createElement("span",{className:"icon icon-close"})),n.a.createElement("h2",null,"Contact link"),n.a.createElement("p",{className:"link-info"},"Copy the link and send it to the person you want to meet in a video chat"),n.a.createElement("p",{className:"link-url"},n.a.createElement("input",{type:"text",value:l,onChange:function(){}})),n.a.createElement("div",{className:"link-copy"},n.a.createElement("button",{onClick:function(){return c(l)}},"Copy link")," ",r&&n.a.createElement("span",{className:"copyed"},"Copied!")),n.a.createElement("p",{className:"link-info"},"Use as an option. Scan QRCode and send the resulting link to the person with who want to start communicating in video chat"),n.a.createElement("div",{className:"link-qrcode"},n.a.createElement(v,{url:l})))});document.fullscreenElement||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));var x=function(e){var a=e.handleShareLink,t=e.handleToggleMic,r=e.audio,l=e.handleToggleCamera,i=e.video,s=e.handleToggleSound,o=e.sound,d=e.handleToggleFullScreen,h=e.handleShareMonitor,u=e.handleToggleMirror,E=e.mirror,v=e.update,N=e.fullScreen,b=Object(c.useState)(!1),k=Object(m.a)(b,2),g=k[0],f=k[1];return n.a.createElement("div",{className:"stream-control"},n.a.createElement("div",{className:"btn-link"},n.a.createElement("button",{className:"btn",onClick:a,title:"Open Link"},n.a.createElement("span",{className:"icon icon-link"}))),n.a.createElement("div",{className:"btn-group"},n.a.createElement("button",{className:"btn",onClick:t,title:"Microphone ON/OFF"},n.a.createElement("span",{className:["icon","icon-mic",r?null:"off"].join(" ")})),n.a.createElement("button",{className:"btn",onClick:l,title:"Camera ON/OFF"},n.a.createElement("span",{className:["icon","icon-camera",i?null:"off"].join(" ")})),n.a.createElement("button",{className:"btn",onClick:s,title:"Sound ON/OFF"},n.a.createElement("span",{className:["icon","icon-sound",o?"off":null].join(" ")})),n.a.createElement("button",{className:"btn",onClick:u,title:"Mirror"},n.a.createElement("span",{className:["icon","icon-mirror",E?null:"off"].join(" ")})),n.a.createElement("button",{className:"btn",onClick:d,title:"Fullscreen ON/OFF"},n.a.createElement("span",{className:["icon","icon-fullscreen",N?null:"off"].join(" ")})),n.a.createElement("button",{className:"btn",onClick:function(){return document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen(),f(!g),!1},title:"Monitor"},n.a.createElement("span",{className:["icon","icon-monitor",g?null:"off"].join(" ")})),v&&n.a.createElement("button",{className:"btn",onClick:h,title:"Share Content"},n.a.createElement("span",{className:"icon icon-share"}))))},p=function(e){var a=e.exitRoom;return n.a.createElement("div",{className:"btn-exit-wrap"},n.a.createElement("button",{className:"btn-exit",onClick:a,title:"Exit"},n.a.createElement("span",{className:"icon icon-exit"})))},O=function(e){var a=e.match,t=e.history,r=Object(c.useState)(!0),l=Object(m.a)(r,2),i=l[0],s=l[1],o=Object(c.useState)(!0),u=Object(m.a)(o,2),E=u[0],v=u[1],b=Object(c.useState)(!1),k=Object(m.a)(b,2),O=k[0],j=k[1],w=Object(c.useState)(!1),C=Object(m.a)(w,2),S=C[0],T=C[1],F=Object(c.useState)(!1),y=Object(m.a)(F,2),D=y[0],R=y[1],L=Object(c.useState)(!1),M=Object(m.a)(L,2),V=M[0],I=M[1],P=Object(c.useState)(!1),z=Object(m.a)(P,2),A=z[0],K=z[1],q=Object(c.useState)(!1),U=Object(m.a)(q,2),B=U[0],J=U[1],W=Object(c.useState)(!1),Q=Object(m.a)(W,2),Y=Q[0],Z=Q[1],$=Object(c.useState)(!1),G=Object(m.a)($,2),H=G[0],X=G[1],_=Object(c.useRef)(),ee=Object(c.useRef)(),ae=Object(c.useRef)(),te=Object(c.useRef)(),ce=Object(c.useRef)(),ne=Object(c.useRef)(),re=Object(c.useRef)([]);function le(e){var a=new RTCSessionDescription(e.sdp);ae.current.setRemoteDescription(a).catch((function(e){return console.log(e)}))}function ie(e){if(e.candidate){var a={target:ce.current,candidate:e.candidate};te.current.emit("ice-candidate",a)}}function se(e){var a=new RTCIceCandidate(e);ae.current.addIceCandidate(a).catch((function(e){return console.log(e)}))}function me(e){ee.current.srcObject=e.streams[0]}function oe(){J(!B)}Object(c.useEffect)((function(){function e(e){var a=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return a.onicecandidate=ie,a.ontrack=me,a.onnegotiationneeded=function(){return function(e){ae.current.createOffer().then((function(e){return ae.current.setLocalDescription(e)})).then((function(){var a={target:e,caller:te.current.id,sdp:ae.current.localDescription};te.current.emit("offer",a)})).catch((function(e){return console.log(e)}))}(e)},a}function t(a){ae.current=e();var t=new RTCSessionDescription(a.sdp);ae.current.setRemoteDescription(t).then((function(){ne.current.getTracks().forEach((function(e){return ae.current.addTrack(e,ne.current)}))})).then((function(){return ae.current.createAnswer()})).then((function(e){return ae.current.setLocalDescription(e)})).then((function(){var e={target:a.caller,caller:te.current.id,sdp:ae.current.localDescription};te.current.emit("answer",e)}))}navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(c){_.current.srcObject=c,ne.current=c,te.current=g.a.connect("/"),te.current.emit("join room",a.params.roomID),te.current.on("other user",(function(a){X(!0),function(a){ae.current=e(a),ne.current.getTracks().forEach((function(e){return re.current.push(ae.current.addTrack(e,ne.current))}))}(a),ce.current=a})),te.current.on("user joined",(function(e){ce.current=e})),te.current.on("offer",t),te.current.on("answer",le),te.current.on("ice-candidate",se)})),setTimeout((function(){return Z(!0)}),1e3)}),[a]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(d,null),n.a.createElement(p,{exitRoom:function(){t.push("/")}}),n.a.createElement("div",{className:"video"},n.a.createElement("video",{id:"partner",poster:"images/poster.jpg",autoPlay:!0,muted:O,ref:ee,className:[V?"mirror":null,D?"active":null].join(" ")}),n.a.createElement("div",{className:"user-video"},n.a.createElement("video",{autoPlay:!0,muted:!0,ref:_,poster:"images/poster.jpg"}))),n.a.createElement(x,{handleShareLink:oe,handleToggleMic:function(){null!=ne.current&&ne.current.getAudioTracks().length>0&&(ne.current.getAudioTracks()[0].enabled=!i,s(!i))},audio:i,handleToggleCamera:function(){null!=ne.current&&ne.current.getVideoTracks().length>0&&(ne.current.getVideoTracks()[0].enabled=!E,v(!E))},video:E,handleToggleSound:function(){j(!O)},sound:O,handleToggleFullScreen:function(){R(!D)},handleShareMonitor:function(){if(0===re.current.length)return!1;navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var a=e.getTracks()[0];re.current.find((function(e){return"video"===e.track.kind})).replaceTrack(a),a.onended=function(){re.current.find((function(e){return"video"===e.track.kind})).replaceTrack(ne.current.getTracks()[1])}}))},handleToggleSettings:function(){K(!A)},handleToggleMirror:function(){I(!V)},otherUser:ce.current,update:H,mirror:V,fullScreen:D}),n.a.createElement(h,null),n.a.createElement(f,{shareLink:B,handleShareLink:oe,handleCopyLink:function(e){navigator.clipboard.writeText(e).then((function(){T(!0),setTimeout((function(){return T(!1)}),1e3)})).catch((function(e){console.log("Something went wrong",e)})),setTimeout((function(){oe()}),1800)},copied:S,url:window.location.href}),!Y&&n.a.createElement("div",{className:"loader"},n.a.createElement(N,null)))};var j=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,null,n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",exact:!0,component:b}),n.a.createElement(s.a,{path:"/room/:roomID",component:O}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,a,t){e.exports=t(100)},56:function(e,a,t){},94:function(e,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.fa610c97.chunk.js.map