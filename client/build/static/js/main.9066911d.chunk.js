(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,n){e.exports=n(98)},54:function(e,t,n){},55:function(e,t,n){},93:function(e,t){},98:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(45),o=n.n(a),i=(n(54),n(48)),u=n(1),l=(n(55),n(100)),s=function(){return c.a.createElement("header",{className:"header"},c.a.createElement("h1",null,"VID.Ok"))},d=function(){return c.a.createElement("footer",null,"2020 | VID.Ok")},m=n(10),f=n.n(m),h=function(e){var t=e.url;return c.a.createElement(f.a,{value:t})},v=function(e){var t=Object(l.a)(),n=window.location.href+"room/".concat(t);return c.a.createElement("div",{className:"container"},c.a.createElement(s,null),c.a.createElement("main",null,c.a.createElement("section",null,c.a.createElement("div",{className:"go-room"},c.a.createElement("input",{type:"text",value:n,width:"300"}),c.a.createElement("button",{onClick:function(){e.history.push("/room/".concat(t))}},"Create Room")),c.a.createElement("div",{className:"qrcode"},c.a.createElement(h,{url:n})))),c.a.createElement(d,null))},p=n(11),E=n(46),g=n.n(E),w=function(e){var t=Object(r.useState)(!0),n=Object(p.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!0),u=Object(p.a)(i,2),l=u[0],s=u[1],d=Object(r.useState)(!1),m=Object(p.a)(d,2),h=m[0],v=m[1],E=Object(r.useRef)(),w=Object(r.useRef)(),b=Object(r.useRef)(),k=Object(r.useRef)(),O=Object(r.useRef)(),j=Object(r.useRef)(),C=Object(r.useRef)([]);function D(e){var t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.stunprotocol.org"},{urls:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]});return t.onicecandidate=y,t.ontrack=x,t.onnegotiationneeded=function(){return function(e){b.current.createOffer().then((function(e){return b.current.setLocalDescription(e)})).then((function(){var t={target:e,caller:k.current.id,sdp:b.current.localDescription};k.current.emit("offer",t)})).catch((function(e){return console.log(e)}))}(e)},t}function R(e){b.current=D();var t=new RTCSessionDescription(e.sdp);b.current.setRemoteDescription(t).then((function(){j.current.getTracks().forEach((function(e){return b.current.addTrack(e,j.current)}))})).then((function(){return b.current.createAnswer()})).then((function(e){return b.current.setLocalDescription(e)})).then((function(){var t={target:e.caller,caller:k.current.id,sdp:b.current.localDescription};k.current.emit("answer",t)}))}function T(e){var t=new RTCSessionDescription(e.sdp);b.current.setRemoteDescription(t).catch((function(e){return console.log(e)}))}function y(e){if(e.candidate){var t={target:O.current,candidate:e.candidate};k.current.emit("ice-candidate",t)}}function S(e){var t=new RTCIceCandidate(e);b.current.addIceCandidate(t).catch((function(e){return console.log(e)}))}function x(e){w.current.srcObject=e.streams[0]}return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:a,video:l}).then((function(t){E.current.srcObject=t,j.current=t,k.current=g.a.connect("/"),k.current.emit("join room",e.match.params.roomID),k.current.on("other user",(function(e){!function(e){b.current=D(e),j.current.getTracks().forEach((function(e){return C.current.push(b.current.addTrack(e,j.current))}))}(e),O.current=e})),k.current.on("user joined",(function(e){O.current=e})),k.current.on("offer",R),k.current.on("answer",T),k.current.on("ice-candidate",S)}))}),[a,l]),c.a.createElement("div",null,c.a.createElement("div",{style:{display:"flex",width:"1050px",margin:"auto"}},c.a.createElement("div",null,c.a.createElement("h3",null,"User (I'm)"),c.a.createElement("video",{controls:!0,autoPlay:!0,ref:E,style:{border:"4px solid red",height:500,width:500}})),c.a.createElement("div",null,c.a.createElement("h3",null,"Partner"),c.a.createElement("video",{controls:!0,autoPlay:!0,ref:w,style:{border:"4px solid blue",height:500,width:500}}))),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){o(!a)}},"Microphone"),c.a.createElement("button",{onClick:function(){s(!l)}},"Camera"),c.a.createElement("button",{onClick:function(){navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var t=e.getTracks()[0];C.current.find((function(e){return"video"===e.track.kind})).replaceTrack(t),t.onended=function(){C.current.find((function(e){return"video"===e.track.kind})).replaceTrack(j.current.getTracks()[1])}}))}},"Share screen")),c.a.createElement("div",null,c.a.createElement(f.a,{value:window.location.href})),c.a.createElement("div",null,"URL for Contact: ",window.location.href,c.a.createElement("button",{onClick:function(){return e=window.location.href,void navigator.clipboard.writeText(e).then((function(){console.log("Copied!"),v(!0),setTimeout((function(){return v(!1)}),1e3)})).catch((function(e){console.log("Something went wrong",e)}));var e}},"Copy")," ",h&&c.a.createElement("span",null,"Copied!")))};var b=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",exact:!0,component:v}),c.a.createElement(u.a,{path:"/room/:roomID",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.9066911d.chunk.js.map